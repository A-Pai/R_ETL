
## 插入与合并（add/bind）
本章要讲的是两个内容，第一个是如何在表格中插入新的数据，包括行和列；第二个是如何把格式相同的表格合并起来，包括行合并和列合并。两者操作和实现内容非常相似，在一定程度上能够相互置换使用，因此放在一章中合并讲解。本章内容较为简单，准备工作如下：

```{r}
library(tidyverse)
```

## 插入（add）

### 行插入（add_row）
我们先建立一个数据表：

```{r}
df <- tibble(x = 1:6, y = 6:1)
df
```
  
下面我们插入一行：
```{r}
df %>%
  add_row(x = 7, y = 0)
```
  
插入成功。有的时候我们想要插入到指定的位置，比如我们要把上面的内容插入到第三行，可以这么写：

```{r}
df %>%
  add_row(x = 7, y = 0,.before = 3)
```

这样，我们就把需要插入的行插入到第3行。如果想要插入到倒数第3行，可以这样操作：

```{r}
df %>%
  add_row(x = 7, y = 0,.after = 3)
```
  
只要我们插入的x和y的数量一致，我们可以插入任意多的行，不过要清楚每一行都是一一对应的，我们举个例子：

```{r}
df %>%
  add_row(x = 1:3, y = 3:1)
```
  
前面我们已经注意到，如果要插入行，就要对每一行所有的元素赋值，如果我们只插入x不插入y，那么其他部分会自动插入缺失值。例如：
```{r}
df %>%
  add_row(x = 1)
```


## 列插入（add_column）

```{r}
df %>% 
  add_column(z = 2:7)
```
  
这里必须注意的是，列一定要是一个相同长度的向量才能够插入，否则会报错。不过，如果想要输入一个与表格相同长度的常数向量，可以直接简写为：
```{r}
df %>% 
  add_column(z = 0) 

#等价于
df %>%
  add_column(z = c(0,0,0,0,0,0))  #只是为了生动一点，熟悉的专家们可以直接用rep(0,6)

```

## 合并（bind）

### 行合并（bind_rows）
要让两个表格进行合并，先要条件就是两个表格必须有相同的列数，而且具有相同的列名称，这样才能够对应起来合并成一个表格。我们举个例子：

```{r}
df1 = tibble(a = 1:2, b = 3:4)
df2 = tibble(a = 7:8, b = 9:10)

df1
df2

```
  
下面我们完成合并：
```{r}
df1 %>%
  bind_rows(df2)
```


### 列合并（bind_cols）
两个表格的合并条件会宽松一点，那就是只要表格的行数相等即可，例子如下：

```{r}
df1 %>%
  bind_cols(df2)
```
  
这里我们发现了一个有趣的现象，因为我们列名称是完全相同的，所以第二个表格的列名称会补上一个“1”。正常情况下，我们不希望合并到一个表格的列名称会发生重名现象，这是大家在实际工作中需要注意的。

## 小结
本章我们介绍了如何插入行列，以及对表格进行行列合并，这些是表格操纵最基本的操作，需要牢牢把握。



